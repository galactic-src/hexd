!function(e){var t={};function n(o){if(t[o])return t[o].exports;var a=t[o]={i:o,l:!1,exports:{}};return e[o].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(o,a,function(t){return e[t]}.bind(null,a));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";n.r(t);const o=Math.sqrt(3),a=e=>2*e,c=e=>e*o,i=e=>Math.round(100*e)/100,l=()=>parseFloat(document.getElementById("edge").value),d=e=>document.getElementById("edge").value=i(e),r=()=>parseFloat(document.getElementById("x").value),s=e=>document.getElementById("x").value=i(e),u=()=>parseFloat(document.getElementById("y").value),g=e=>document.getElementById("y").value=i(e),v=()=>document.getElementById("edgeLocked").checked,m=e=>{e.globalAlpha=1,e.globalCompositeOperation="source-over",e.lineWidth=3,e.strokeStyle="#FFFFFF"};var f={scaleCentreX:0,scaleCentreY:0};const h={canvas:{background:void 0,backgroundCanvas:void 0}};var p=h;const y=()=>document.getElementById("hiddenImage"),E=()=>document.getElementById("output").getContext("2d"),b=()=>parseFloat(document.getElementById("output").height),C=()=>parseFloat(document.getElementById("output").width);function I(e){const t=C(),n=l(),a=c(n),i=v();e<0?e=0:e>t&&(e=t),f.scaleCentreX=e;const r=e+a/2;e-a/2<0?i?s(a/2):d(e/(o/2)):r>t&&(i?s(t-a/2):d((t-e)/(o/2))),w()}function T(e){const t=b(),n=l(),o=a(n),c=v();e<0?e=0:e>t&&(e=t),f.scaleCentreY=e;const i=e+o/2;e-o/2<0?c?g(o/2):d(e):i>t&&(c?g(t-o/2):d(t-e)),w(),f.scaleCentreY=u()}function B(e){const t=b(),n=C();let i=e;a(e)>t&&(i=t/2),c(i)>n&&(i=n/o),i!==e&&d(i);const l=r(),v=c(i);l+v/2>n?s(n-v/2):l-v/2<0&&s(v/2);const m=u(),f=a(i);m+f/2>t?g(t-f/2):m-f/2<0&&g(f/2),w()}function w(){const e=E();0===l()?function(e){m(e),e.globalCompositeOperation="destination-out",e.clearRect(0,0,e.canvas.width,e.canvas.height)}(e):(function(e){m(e),e.drawImage(y(),0,0)}(e),function(e){const t=l(),n=r(),o=u(),i=c(t),d=a(t),s=o-d/2,g=o+d/2,v=n+i/2,f=n-i/2;m(e),e.globalCompositeOperation="destination-out";const h=Math.max(s-1,0),p=Math.min(g+1,e.canvas.height),y=p-h,E=Math.max(f-1,0),b=Math.min(v+1,e.canvas.width);s>0&&e.fillRect(0,0,e.canvas.width,s);g<e.canvas.height&&e.fillRect(0,g,e.canvas.width,e.canvas.height-g);f>0&&e.fillRect(0,h,f,y);v<e.canvas.width&&e.fillRect(v,h,e.canvas.width-v,y);e.beginPath(),e.moveTo(E,h),e.lineTo(E,s+.5*t+1),e.lineTo(f,s+.5*t),e.lineTo(n,s),e.lineTo(v,s+.5*t),e.lineTo(b,s+.5*t+1),e.lineTo(b,h),e.closePath(),e.fill(),e.beginPath(),e.moveTo(E,p),e.lineTo(E,g-.5*t-1),e.lineTo(f,g-.5*t),e.lineTo(n,g),e.lineTo(v,g-.5*t),e.lineTo(b,g-.5*t-1),e.lineTo(b,p),e.closePath(),e.fill()}(e))}function x(e){const t=y();null!==t&&document.body.removeChild(t);const n=document.createElement("img");n.id="hiddenImage",n.origin="anonymous",n.src=URL.createObjectURL(e),n.style="position:absolute; top: -9999px; left: -9999px;",n.onload=function(){const e=E();console.log(p);const t=p.canvas.backgroundContext;e.canvas.width=t.canvas.width=this.naturalWidth,e.canvas.height=t.canvas.height=this.naturalHeight,m(t),t.globalAlpha=.3,t.drawImage(y(),0,0),function(e){const t=e.canvas.width/o,n=e.canvas.height/2,a=Math.min(t,n,80),c=e.canvas.width/2,i=e.canvas.height/2;f.scaleCentreX=c,f.scaleCentreY=i,d(a),s(c),g(i)}(e),w()},document.body.appendChild(n)}window.onload=()=>{const e=document.getElementById("output");e.addEventListener("mousemove",({clientX:t,clientY:n})=>{const{left:o,top:a}=e.getBoundingClientRect(),c=t-o,i=n-a;w(),P(E(),c,i)}),e.addEventListener("click",({clientX:t,clientY:n})=>{const{left:o,top:a}=e.getBoundingClientRect(),c=t-o,i=n-a;f.scaleCentreX=c,f.scaleCentreY=i;const{x:d,y:r}=L(c,i,l(),C(),b());s(d),g(r),w(),P(E(),c,i)}),e.addEventListener("mouseleave",()=>{w()}),e.addEventListener("wheel",e=>{if(e.preventDefault(),v())return;let t=l()+.5*e.deltaY;t<0&&(t=0),s(f.scaleCentreX),I(f.scaleCentreX),g(f.scaleCentreY),T(f.scaleCentreY),d(t),B(t)});const t=document.getElementById("dropzone");window.addEventListener("dragenter",(function(e){t.style.visibility="visible"}));t.addEventListener("dragenter",e=>{e.dataTransfer.dropEffect="move",e.preventDefault()}),t.addEventListener("dragover",e=>{e.dataTransfer.dropEffect="move",e.preventDefault()}),t.addEventListener("drop",e=>{e.preventDefault(),e.stopPropagation(),t.style.visibility="hidden",x(e.dataTransfer.files[0])}),t.addEventListener("dragleave",e=>{t.style.visibility="hidden"});const n=document.getElementById("x");n.addEventListener("change",e=>I(parseFloat(n.value)));const o=document.getElementById("y");o.addEventListener("change",e=>T(parseFloat(o.value)));const i=document.getElementById("edge");i.addEventListener("change",e=>B(parseFloat(i.value)));document.getElementById("fileSelector").addEventListener("change",e=>function(e){if(void 0===e)return;x(e)}(e.target.files[0]));const m=document.getElementById("export");m.addEventListener("click",e=>function(e){const t=l();if(0===t)return void alert("hex too small");const n=c(t),o=a(t),i=document.createElement("canvas");i.width=n,i.height=o;const d=r(),s=u(),g=d-n/2,v=s-o/2;i.getContext("2d").drawImage(document.getElementById("output"),g,v,n,o,0,0,n,o),e.href=i.toDataURL("image/png")}(m)),(()=>{const e=document.getElementById("background");h.canvas.background=e,h.canvas.backgroundCanvas=e.getContext("2d")})()};const L=(e,t,n,o,a)=>({x:F(e,n,o),y:k(t,n,a)}),F=(e,t,n)=>{const o=c(t);return e+o/2>n?n-o/2:e-o/2<0?o/2:e},k=(e,t,n)=>{const o=a(t);return e+o/2>n?n-o/2:e-o/2<0?o/2:e};function P(e,t,n){const o=l(),i=b(),d=C(),r=c(o)/2,s=a(o)/2,u=s/2,{x:g,y:v}=L(t,n,o,d,i);m(e),e.beginPath(),e.moveTo(g-r,v-u),e.lineTo(g-r,v+u),e.lineTo(g,v+s),e.lineTo(g+r,v+u),e.lineTo(g+r,v-u),e.lineTo(g,v-s),e.closePath(),e.stroke()}}]);