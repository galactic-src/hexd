!function(e){var t={};function n(a){if(t[a])return t[a].exports;var o=t[a]={i:a,l:!1,exports:{}};return e[a].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,a){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(a,o,function(t){return e[t]}.bind(null,o));return a},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";n.r(t);const a=Math.sqrt(3),o=e=>2*e,c=e=>e*a,i=e=>Math.round(100*e)/100,l=()=>parseFloat(document.getElementById("edge").value),s=e=>document.getElementById("edge").value=i(e),d=()=>parseFloat(document.getElementById("x").value),r=e=>document.getElementById("x").value=i(e),u=()=>parseFloat(document.getElementById("y").value),v=e=>document.getElementById("y").value=i(e),g=()=>document.getElementById("edgeLocked").checked,m=e=>{e.globalAlpha=1,e.globalCompositeOperation="source-over",e.lineWidth=3,e.strokeStyle="#FFFFFF"};var p={scaleCentreX:0,scaleCentreY:0};const f={canvas:{background:void 0,backgroundCanvas:void 0,output:void 0,outputCanvas:void 0}};var h=f;const y=()=>document.getElementById("hiddenImage"),E=()=>parseFloat(document.getElementById("output").height),b=()=>parseFloat(document.getElementById("output").width);function C(e){const t=b(),n=l(),o=c(n),i=g();e<0?e=0:e>t&&(e=t),p.scaleCentreX=e;const d=e+o/2;e-o/2<0?i?r(o/2):s(e/(a/2)):d>t&&(i?r(t-o/2):s((t-e)/(a/2))),w()}function T(e){const t=E(),n=l(),a=o(n),c=g();e<0?e=0:e>t&&(e=t),p.scaleCentreY=e;const i=e+a/2;e-a/2<0?c?v(a/2):s(e):i>t&&(c?v(t-a/2):s(t-e)),w(),p.scaleCentreY=u()}function I(e){const t=E(),n=b();let i=e;o(e)>t&&(i=t/2),c(i)>n&&(i=n/a),i!==e&&s(i);const l=d(),g=c(i);l+g/2>n?r(n-g/2):l-g/2<0&&r(g/2);const m=u(),p=o(i);m+p/2>t?v(t-p/2):m-p/2<0&&v(p/2),w()}function w(){const e=h.canvas.outputCanvas;0===l()?function(e){m(e),e.globalCompositeOperation="destination-out",e.clearRect(0,0,e.canvas.width,e.canvas.height)}(e):(function(e){m(e),e.drawImage(y(),0,0)}(e),function(e){const t=l(),n=d(),a=u(),i=c(t),s=o(t),r=a-s/2,v=a+s/2,g=n+i/2,p=n-i/2;m(e),e.globalCompositeOperation="destination-out";const f=Math.max(r-1,0),h=Math.min(v+1,e.canvas.height),y=h-f,E=Math.max(p-1,0),b=Math.min(g+1,e.canvas.width);r>0&&e.fillRect(0,0,e.canvas.width,r);v<e.canvas.height&&e.fillRect(0,v,e.canvas.width,e.canvas.height-v);p>0&&e.fillRect(0,f,p,y);g<e.canvas.width&&e.fillRect(g,f,e.canvas.width-g,y);e.beginPath(),e.moveTo(E,f),e.lineTo(E,r+.5*t+1),e.lineTo(p,r+.5*t),e.lineTo(n,r),e.lineTo(g,r+.5*t),e.lineTo(b,r+.5*t+1),e.lineTo(b,f),e.closePath(),e.fill(),e.beginPath(),e.moveTo(E,h),e.lineTo(E,v-.5*t-1),e.lineTo(p,v-.5*t),e.lineTo(n,v),e.lineTo(g,v-.5*t),e.lineTo(b,v-.5*t-1),e.lineTo(b,h),e.closePath(),e.fill()}(e))}function B(e){const t=y();null!==t&&document.body.removeChild(t);const n=document.createElement("img");n.id="hiddenImage",n.origin="anonymous",n.src=URL.createObjectURL(e),n.style="position:absolute; top: -9999px; left: -9999px;",n.onload=function(){const e=h.canvas.outputCanvas,t=h.canvas.backgroundCanvas;e.canvas.width=t.canvas.width=this.naturalWidth,e.canvas.height=t.canvas.height=this.naturalHeight,m(t),t.globalAlpha=.3,t.drawImage(y(),0,0),function(e){const t=e.canvas.width/a,n=e.canvas.height/2,o=Math.min(t,n,80),c=e.canvas.width/2,i=e.canvas.height/2;p.scaleCentreX=c,p.scaleCentreY=i,s(o),r(c),v(i)}(e),w()},document.body.appendChild(n)}window.onload=()=>{(()=>{const e=document.getElementById("background");f.canvas.background=e,f.canvas.backgroundCanvas=e.getContext("2d")})(),(()=>{const e=document.getElementById("output");f.canvas.output=e,f.canvas.outputCanvas=e.getContext("2d")})(),h.canvas.output.addEventListener("mousemove",({clientX:e,clientY:t})=>{const{left:n,top:a}=h.canvas.output.getBoundingClientRect(),o=e-n,c=t-a;w(),k(h.canvas.outputCanvas,o,c)}),h.canvas.output.addEventListener("click",({clientX:e,clientY:t})=>{const{left:n,top:a}=h.canvas.output.getBoundingClientRect(),o=e-n,c=t-a;p.scaleCentreX=o,p.scaleCentreY=c;const{x:i,y:s}=x(o,c,l(),b(),E());r(i),v(s),w(),k(h.canvas.outputCanvas,o,c)}),h.canvas.output.addEventListener("mouseleave",()=>{w()}),h.canvas.output.addEventListener("wheel",e=>{if(e.preventDefault(),g())return;let t=l()+.5*e.deltaY;t<0&&(t=0),r(p.scaleCentreX),C(p.scaleCentreX),v(p.scaleCentreY),T(p.scaleCentreY),s(t),I(t)});const e=document.getElementById("dropzone");window.addEventListener("dragenter",(function(t){e.style.visibility="visible"}));e.addEventListener("dragenter",e=>{e.dataTransfer.dropEffect="move",e.preventDefault()}),e.addEventListener("dragover",e=>{e.dataTransfer.dropEffect="move",e.preventDefault()}),e.addEventListener("drop",t=>{t.preventDefault(),t.stopPropagation(),e.style.visibility="hidden",B(t.dataTransfer.files[0])}),e.addEventListener("dragleave",t=>{e.style.visibility="hidden"});const t=document.getElementById("x");t.addEventListener("change",e=>C(parseFloat(t.value)));const n=document.getElementById("y");n.addEventListener("change",e=>T(parseFloat(n.value)));const a=document.getElementById("edge");a.addEventListener("change",e=>I(parseFloat(a.value)));document.getElementById("fileSelector").addEventListener("change",e=>function(e){if(void 0===e)return;B(e)}(e.target.files[0]));const i=document.getElementById("export");i.addEventListener("click",e=>function(e){const t=l();if(0===t)return void alert("hex too small");const n=c(t),a=o(t),i=document.createElement("canvas");i.width=n,i.height=a;const s=d(),r=u(),v=s-n/2,g=r-a/2;i.getContext("2d").drawImage(document.getElementById("output"),v,g,n,a,0,0,n,a),e.href=i.toDataURL("image/png")}(i))};const x=(e,t,n,a,o)=>({x:L(e,n,a),y:F(t,n,o)}),L=(e,t,n)=>{const a=c(t);return e+a/2>n?n-a/2:e-a/2<0?a/2:e},F=(e,t,n)=>{const a=o(t);return e+a/2>n?n-a/2:e-a/2<0?a/2:e};function k(e,t,n){const a=l(),i=E(),s=b(),d=c(a)/2,r=o(a)/2,u=r/2,{x:v,y:g}=x(t,n,a,s,i);m(e),e.beginPath(),e.moveTo(v-d,g-u),e.lineTo(v-d,g+u),e.lineTo(v,g+r),e.lineTo(v+d,g+u),e.lineTo(v+d,g-u),e.lineTo(v,g-r),e.closePath(),e.stroke()}}]);
//# sourceMappingURL=bundle.js.map