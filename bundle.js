!function(e){var t={};function n(o){if(t[o])return t[o].exports;var a=t[o]={i:o,l:!1,exports:{}};return e[o].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(o,a,function(t){return e[t]}.bind(null,a));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";n.r(t);const o=Math.sqrt(3),a=e=>2*e,i=e=>e*o,l=e=>Math.round(100*e)/100,c=()=>parseFloat(document.getElementById("edge").value),d=e=>document.getElementById("edge").value=l(e),r=()=>parseFloat(document.getElementById("x").value),s=e=>document.getElementById("x").value=l(e),u=()=>parseFloat(document.getElementById("y").value),m=e=>document.getElementById("y").value=l(e),g=()=>document.getElementById("edgeLocked").checked,v=e=>{e.globalAlpha=1,e.globalCompositeOperation="source-over",e.lineWidth=3,e.strokeStyle="#FFFFFF"};var f={scaleCentreX:0,scaleCentreY:0};const h=()=>document.getElementById("hiddenImage"),p=()=>document.getElementById("output").getContext("2d"),y=()=>parseFloat(document.getElementById("output").height),E=()=>parseFloat(document.getElementById("output").width);function b(e){const t=E(),n=c(),a=i(n),l=g();e<0?e=0:e>t&&(e=t),f.scaleCentreX=e;const r=e+a/2;e-a/2<0?l?s(a/2):d(e/(o/2)):r>t&&(l?s(t-a/2):d((t-e)/(o/2))),C()}function I(e){const t=y(),n=c(),o=a(n),i=g();e<0?e=0:e>t&&(e=t),f.scaleCentreY=e;const l=e+o/2;e-o/2<0?i?m(o/2):d(e):l>t&&(i?m(t-o/2):d(t-e)),C(),f.scaleCentreY=u()}function T(e){const t=y(),n=E();let l=e;a(e)>t&&(l=t/2),i(l)>n&&(l=n/o),l!==e&&d(l);const c=r(),g=i(l);c+g/2>n?s(n-g/2):c-g/2<0&&s(g/2);const v=u(),f=a(l);v+f/2>t?m(t-f/2):v-f/2<0&&m(f/2),C()}function C(){const e=p();0===c()?function(e){v(e),e.globalCompositeOperation="destination-out",e.clearRect(0,0,e.canvas.width,e.canvas.height)}(e):(function(e){v(e),e.drawImage(h(),0,0)}(e),function(e){const t=c(),n=r(),o=u(),l=i(t),d=a(t),s=o-d/2,m=o+d/2,g=n+l/2,f=n-l/2;v(e),e.globalCompositeOperation="destination-out";const h=Math.max(s-1,0),p=Math.min(m+1,e.canvas.height),y=p-h,E=Math.max(f-1,0),b=Math.min(g+1,e.canvas.width);s>0&&e.fillRect(0,0,e.canvas.width,s);m<e.canvas.height&&e.fillRect(0,m,e.canvas.width,e.canvas.height-m);f>0&&e.fillRect(0,h,f,y);g<e.canvas.width&&e.fillRect(g,h,e.canvas.width-g,y);e.beginPath(),e.moveTo(E,h),e.lineTo(E,s+.5*t+1),e.lineTo(f,s+.5*t),e.lineTo(n,s),e.lineTo(g,s+.5*t),e.lineTo(b,s+.5*t+1),e.lineTo(b,h),e.closePath(),e.fill(),e.beginPath(),e.moveTo(E,p),e.lineTo(E,m-.5*t-1),e.lineTo(f,m-.5*t),e.lineTo(n,m),e.lineTo(g,m-.5*t),e.lineTo(b,m-.5*t-1),e.lineTo(b,p),e.closePath(),e.fill()}(e))}function B(e){const t=h();null!==t&&document.body.removeChild(t);const n=document.createElement("img");n.id="hiddenImage",n.origin="anonymous",n.src=URL.createObjectURL(e),n.style="position:absolute; top: -9999px; left: -9999px;",n.onload=function(){const e=p(),t=document.getElementById("background").getContext("2d");e.canvas.width=t.canvas.width=this.naturalWidth,e.canvas.height=t.canvas.height=this.naturalHeight,v(t),t.globalAlpha=.3,t.drawImage(h(),0,0),function(e){const t=e.canvas.width/o,n=e.canvas.height/2,a=Math.min(t,n,80),i=e.canvas.width/2,l=e.canvas.height/2;f.scaleCentreX=i,f.scaleCentreY=l,d(a),s(i),m(l)}(e),C()},document.body.appendChild(n)}window.onload=()=>{const e=document.getElementById("output");e.addEventListener("mousemove",({clientX:t,clientY:n})=>{const{left:o,top:a}=e.getBoundingClientRect(),i=t-o,l=n-a;C(),F(p(),i,l)}),e.addEventListener("click",({clientX:t,clientY:n})=>{const{left:o,top:a}=e.getBoundingClientRect(),i=t-o,l=n-a;f.scaleCentreX=i,f.scaleCentreY=l;const{x:d,y:r}=w(i,l,c(),E(),y());s(d),m(r),C(),F(p(),i,l)}),e.addEventListener("mouseleave",()=>{C()}),e.addEventListener("wheel",e=>{if(e.preventDefault(),g())return;let t=c()+.5*e.deltaY;t<0&&(t=0),s(f.scaleCentreX),b(f.scaleCentreX),m(f.scaleCentreY),I(f.scaleCentreY),d(t),T(t)});const t=document.getElementById("dropzone");window.addEventListener("dragenter",(function(e){t.style.visibility="visible"}));t.addEventListener("dragenter",e=>{e.dataTransfer.dropEffect="move",e.preventDefault()}),t.addEventListener("dragover",e=>{e.dataTransfer.dropEffect="move",e.preventDefault()}),t.addEventListener("drop",e=>{e.preventDefault(),e.stopPropagation(),t.style.visibility="hidden",B(e.dataTransfer.files[0])}),t.addEventListener("dragleave",e=>{t.style.visibility="hidden"});const n=document.getElementById("x");n.addEventListener("change",e=>b(parseFloat(n.value)));const o=document.getElementById("y");o.addEventListener("change",e=>I(parseFloat(o.value)));const l=document.getElementById("edge");l.addEventListener("change",e=>T(parseFloat(l.value)));document.getElementById("fileSelector").addEventListener("change",e=>function(e){if(void 0===e)return;B(e)}(e.target.files[0]));const v=document.getElementById("export");v.addEventListener("click",e=>function(e){const t=c();if(0===t)return void alert("hex too small");const n=i(t),o=a(t),l=document.createElement("canvas");l.width=n,l.height=o;const d=r(),s=u(),m=d-n/2,g=s-o/2;l.getContext("2d").drawImage(document.getElementById("output"),m,g,n,o,0,0,n,o),e.href=l.toDataURL("image/png")}(v))};const w=(e,t,n,o,a)=>({x:x(e,n,o),y:L(t,n,a)}),x=(e,t,n)=>{const o=i(t);return e+o/2>n?n-o/2:e-o/2<0?o/2:e},L=(e,t,n)=>{const o=a(t);return e+o/2>n?n-o/2:e-o/2<0?o/2:e};function F(e,t,n){const o=c(),l=y(),d=E(),r=i(o)/2,s=a(o)/2,u=s/2,{x:m,y:g}=w(t,n,o,d,l);v(e),e.beginPath(),e.moveTo(m-r,g-u),e.lineTo(m-r,g+u),e.lineTo(m,g+s),e.lineTo(m+r,g+u),e.lineTo(m+r,g-u),e.lineTo(m,g-s),e.closePath(),e.stroke()}}]);